(this.webpackJsonpadegsame=this.webpackJsonpadegsame||[]).push([[0],{39:function(e,t,a){e.exports=a.p+"static/media/sallad.b3c8b8e0.png"},42:function(e,t,a){e.exports=a(71)},47:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(35),l=a.n(r),o=(a(47),a(16)),i=a(40),s=a(41),u=a(36),m=a(15),d=a(8),p=a(9),h=a(3),f=a.n(h),g="http://maal-bc.com/adeegside/api",E=new(function(){function e(){Object(d.a)(this,e),localStorage.getItem("token")?this.authenticated=!0:this.authenticated=!1}return Object(p.a)(e,[{key:"login",value:function(e){localStorage.getItem("token")&&(this.authenticated=!0),e()}},{key:"logout",value:function(e){localStorage.removeItem("token"),this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),v=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return c.a.createElement(m.b,{render:function(e){return E.isAuthenticated()?c.a.createElement(t,Object.assign({},e,a)):c.a.createElement(m.a,{to:{pathname:"/",state:{from:e.location}}})}})},b=a(17),N=a(13),y=a(12),_=a(14),O=Object(n.createContext)(),k=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(N.a)(this,Object(y.a)(t).call(this,e))).state={products:[],categories:[],messages:[],cart:[],ordered:[{token:localStorage.getItem("token")}],whoisopen:null,checkout:!1},a}return Object(_.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(O.Provider,{value:{state:this.state,addCart:function(t){var a=[].concat(Object(b.a)(e.state.cart),[t]);if(!1===e.state.cart.includes(t))e.setState({cart:a});else{var n=e.state.cart.filter((function(e,a){return e!==t}));e.setState({cart:n})}},addOrder:function(t){var a=[].concat(Object(b.a)(e.state.ordered),[t]);!1===e.state.ordered.includes(t)&&e.setState({ordered:a})},setCheckOut:function(t){e.setState({checkout:t})},getCheckOut:function(){return e.state.checkout},setWhoIsOpen:function(t){e.setState({whoisopen:t})},getWhoIsOpen:function(){return e.state.whoisopen},removeWhoIsOpen:function(){e.setState({whoisopen:null})},removeOrder:function(t){var a=e.state.ordered.filter((function(e,a){return e!==t}));e.setState({ordered:a})},getTotalCart:function(){return e.state.cart.length},getCart:function(){return e.state.cart},getOrder:function(){return e.state.ordered}}},this.props.children)}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(N.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!1,error:!1,payload:[]},a}return Object(_.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.data;this.setState({loading:!0,error:!1}),f()({method:"post",url:this.props.path,headers:{"content-type":"application/json"},data:{token:localStorage.getItem("token"),category_id:t}}).then((function(t){t.data.invalid&&e.setState({error:!0}),e.setState({payload:t.data,loading:!1})})).catch((function(t){e.setState({error:!0})}))}},{key:"render",value:function(){return this.props.render(this.state)}}]),t}(n.Component),C=a(20),S=function(e){var t=c.a.useContext(O),a=Object(n.useState)([]),r=Object(C.a)(a,2),l=r[0],o=r[1];return e.products.map((function(e){var a="";return l.includes(e.pk_product_id)?(a="green","Dhig"):(a="red","Qaado"),c.a.createElement("div",{className:"item",key:e.pk_product_id},c.a.createElement("div",{className:"item_image",style:{backgroundImage:"url(".concat(e.api_url,")")}}),c.a.createElement("div",{className:"item_content"},c.a.createElement("h5",{className:"title"},e.product_name),c.a.createElement("div",{className:"item_content_icons"},c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-stack-overflow"}))," ","Qauntity",c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-money"}))," ","Price")),c.a.createElement("span",{className:"leading"},c.a.createElement("i",{className:"fa fa-shopping-cart",onClick:function(){!function(e){t.addCart(e),l.includes(e)?o(l.filter((function(t,a){return t!==e}))):o([].concat(Object(b.a)(l),[e]))}(e.pk_product_id)},style:{color:a}})))}))},w=function(e){var t=c.a.useContext(O);Object(n.useEffect)((function(){f()({method:"post",url:g+"/is_token_valid",headers:{"content-type":"application/json"},data:{token:localStorage.getItem("token")}}).then((function(t){t.data.valid||E.logout((function(){e.history.push("/login")}))})).catch((function(e){console.log(e)}))}),[]);return function(){var a=t.getWhoIsOpen()===e.category_id?" ":"items";return console.log(a),c.a.createElement("div",{className:"content_categories "+a},c.a.createElement(j,{path:g+"/fetch_products",data:e.category_id,render:function(e){return e.loading?c.a.createElement("p",null,"Loading products"):e.error?c.a.createElement("p",null,"Error while loading products \ud83d\ude20"):c.a.createElement(S,{products:e.payload})}}))}()},x=function(e){var t=c.a.useContext(O),a=e.categories.map((function(e){return c.a.createElement("div",{className:"categories_title",key:e.pk_cat_id},c.a.createElement("div",{className:"categories_items",onClick:function(){return a=e.pk_cat_id,void(null!==t.getWhoIsOpen()?t.removeWhoIsOpen():t.setWhoIsOpen(a));var a}},c.a.createElement("h5",{className:"title"},e.category_name),c.a.createElement("span",{className:"leading"},c.a.createElement("i",{className:"fa fa-angle-right rightangle"}))),c.a.createElement(w,{category_id:e.pk_cat_id}))}));return a};function I(e){var t=c.a.useContext(O),a=function(e){e.target.checked?t.addOrder(e.target.value):t.removeOrder(e.target.value)};return e.quantity.map((function(e,n){return console.log(t.getOrder()),c.a.createElement("ul",{key:e.id},c.a.createElement("li",null,c.a.createElement("label",{className:"switch"},c.a.createElement("input",{type:"checkbox",className:"switch__input",value:e.id,onChange:a}),c.a.createElement("div",{className:"switch__toggle"},c.a.createElement("div",{className:"switch__handle"}))),e.quantity,c.a.createElement("span",{className:"p"},e.price)))}))}function A(e){var t=Object(n.useState)([]),a=Object(C.a)(t,2),r=a[0],l=a[1],o=c.a.useContext(O),i=o.getCart();Object(n.useEffect)((function(){f()({method:"post",url:g+"/fetch_cart_products",headers:{"content-type":"application/json"},data:JSON.stringify(i)}).then((function(e){var t=e.data;l(t),console.log(e)})).catch((function(e){console.log(e)}))}),[]);return r.map((function(e,t){return c.a.createElement("section",{className:"products"},c.a.createElement("div",{style:{height:"200px",padding:"1px 0 0 0"},key:e.pk_product_id},c.a.createElement("div",{className:"card card--material"},c.a.createElement("div",{className:"card__title card--material__title"},e.product_name),c.a.createElement("div",{className:"card__content card--material__content"},c.a.createElement(I,{quantity:e.quantity}),o.getOrder().length>0?c.a.createElement("button",{className:"checkout",onClick:function(){!function(){var e=o.getOrder();f()({method:"post",url:g+"/create_order",headers:{"content-type":"application/json"},data:JSON.stringify(e)}).then((function(e){e.data;console.log(e.data)})).catch((function(e){console.log(e)}))}()}},"Dalbo"):null))))}))}var W=function(e){var t=c.a.useContext(O);Object(n.useEffect)((function(){f()({method:"post",url:g+"/is_token_valid",headers:{"content-type":"application/json"},data:{token:localStorage.getItem("token")}}).then((function(t){t.data.valid||E.logout((function(){e.history.push("/login")}))})).catch((function(e){console.log(e)}))}),[]);return t.getCheckOut()?c.a.createElement("div",null,c.a.createElement(j,{render:function(){return c.a.createElement(A,null)}})):c.a.createElement(j,{path:g+"/fetch_categories",render:function(e){return e.loading?c.a.createElement("p",null,"Loading Orders"):e.error?c.a.createElement("p",null,"Error while loading orders \ud83d\ude20"):c.a.createElement(x,{categories:e.payload})}})},D=a(19),L=a(39),P=a.n(L),T=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(N.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(c)))).state={username:null,password:null},a.handleChange=function(e){e.preventDefault(),a.setState(Object(D.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state;f()({method:"post",url:"".concat(g,"/customer_login"),headers:{"content-type":"application/json"},data:t}).then((function(e){e.data.valid?(localStorage.setItem("token",e.data.token),E.login((function(){a.props.history.push("/dashboard")}))):console.log(e.data,"invalid login")})).catch((function(e){console.log(e,"Invalid Login")}))},a}return Object(_.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return E.isAuthenticated()?c.a.createElement(m.a,{to:"/dashboard"}):c.a.createElement("div",null,c.a.createElement("div",{className:"preloader"},c.a.createElement("img",{src:P.a,alt:"loading"})),c.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-phone"})," \xa0 \xa0 \xa0",c.a.createElement("input",{type:"number",name:"phone",className:"text-input text-input--material",placeholder:"TALEEFAN NUMBERKA",onChange:this.handleChange})),c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-lock"})," \xa0 \xa0 \xa0",c.a.createElement("input",{type:"password",className:"text-input text-input--material",placeholder:"FURE SIREEDKA",name:"password",onChange:this.handleChange})),c.a.createElement("div",null,c.a.createElement("input",{type:"submit",className:"button",defaultValue:"BOOQO"}))))}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(N.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(c)))).state={fullname:null,phone:null,address:null,password:null},a.handleChange=function(e){e.preventDefault(),a.setState(Object(D.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state;f()({method:"post",url:"".concat(g,"/create_customer"),headers:{"content-type":"application/json"},data:t}).then((function(e){e.data.success?console.log(e.data):console.log(e.data,"invalid Signup")})).catch((function(e){console.log(e,"Invalid Signup")}))},a}return Object(_.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return E.isAuthenticated()?c.a.createElement(m.a,{to:"/dashboard"}):c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("input",{type:"text",name:"fullname",placeholder:"fullname",onChange:this.handleChange}),c.a.createElement("input",{type:"text",name:"address",placeholder:"address",onChange:this.handleChange}),c.a.createElement("input",{type:"number",name:"phone",placeholder:"phone",onChange:this.handleChange}),c.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:this.handleChange}),c.a.createElement("input",{type:"submit",value:"Signup"})))}}]),t}(n.Component);function B(e){return c.a.createElement("nav",{id:"sidenav"},c.a.createElement("div",{className:"hero_image"}),c.a.createElement("div",{className:"nav_list"},c.a.createElement("ul",{className:"fa-ul"},c.a.createElement("li",null,c.a.createElement("span",{className:"nav_icons"},c.a.createElement("i",{className:"fa fa-home"})),"Home"),c.a.createElement("li",null,c.a.createElement("span",{className:"nav_icons"},c.a.createElement("i",{className:"fa fa-language"})),"Languages"),c.a.createElement("li",null,c.a.createElement("span",{className:"nav_icons"},c.a.createElement("i",{className:"fa fa-lock"})),"Privacy Policy"),c.a.createElement("li",null,c.a.createElement("span",{className:"nav_icons"},c.a.createElement("i",{className:"fa fa-file"})),"Terms & Conditions"),c.a.createElement("li",null,c.a.createElement("span",{className:"nav_icons"},c.a.createElement("i",{className:"fa fa-star"})),"Rate Us"),c.a.createElement("li",{onClick:function(){return E.logout((function(){return c.a.createElement(m.a,{to:"/login"})}))}},c.a.createElement("span",{className:"nav_icons"},c.a.createElement("i",{className:"fa fa-power-off"})),"Logout"))))}function J(e){return c.a.createElement("div",{className:"grid_container"},c.a.createElement("div",{id:"shadow"}),c.a.createElement(B,null),c.a.createElement("section",{id:"categories"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"category_image"}),c.a.createElement("div",{className:"category_image2"}),c.a.createElement("div",{className:"category_image3"})),c.a.createElement("h3",{id:"c_image_caption"},"Fruits")),c.a.createElement("section",{id:"content"},c.a.createElement(W,null)))}a(70);function R(e){var t=c.a.useContext(O),a=t.getCart();return c.a.createElement("header",{id:"topheader"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"left-head"},c.a.createElement("a",{href:"#",id:"bar",className:"bar"},c.a.createElement("i",{className:"fa fa-bars",id:"nav-bar"})),c.a.createElement("a",{href:"#",id:"return",className:"return"},c.a.createElement("i",{className:"fa fa-arrow-left",id:"nav-bar"})),c.a.createElement("span",{id:"sitename"},"Adeegside")),c.a.createElement("div",{className:"center-head"},c.a.createElement("input",{type:"text",id:"searchinput",placeholder:"Enter Product Name"})),c.a.createElement("div",{className:"right-head"},c.a.createElement("a",{href:"#",id:"searchbtn"},c.a.createElement("i",{className:"fa fa-search"})),a.length>0?c.a.createElement("a",{href:"#",id:"cart",onClick:function(){var e;e=!0,t.setCheckOut(e)}},c.a.createElement("i",{className:"fa fa-shopping-cart fa-2x"}),c.a.createElement("span",{className:"counter"},t.getTotalCart())):c.a.createElement("a",{href:"#",id:"cart"},c.a.createElement("i",{className:"fa fa-shopping-cart fa-2x"}),c.a.createElement("span",{className:"counter"},t.getTotalCart())))))}var F=function(e){return Object(n.useEffect)((function(){f()({method:"post",url:g+"/is_token_valid",headers:{"content-type":"application/json"},data:{token:localStorage.getItem("token")}}).then((function(t){t.data.valid||E.logout((function(){e.history.push("/login")}))})).catch((function(e){console.log(e)}))}),[]),c.a.createElement("div",null,c.a.createElement(R,null),c.a.createElement(J,null))},Q=a(7);function U(){return E.isAuthenticated()?c.a.createElement(m.a,{to:"/dashboard"}):c.a.createElement("div",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(Q.b,{to:"/login"},"Login"))))}var K=function(){return Object(n.useEffect)((function(){var e=document.createElement("script");e.src="/scripts.js",e.type="text/javascript",e.async=!0,document.body.appendChild(e),console.log("inserted")}),[]),o.b.add(i.a,s.a),c.a.createElement(k,null,c.a.createElement("div",{className:"App"},c.a.createElement(m.d,null,c.a.createElement(m.b,{exact:!0,path:"/login",component:T}),c.a.createElement(m.b,{exact:!0,path:"/signup",component:q}),c.a.createElement(m.b,{exact:!0,path:"/",component:U}),c.a.createElement(m.b,{exact:!0,path:"/home",component:U}),c.a.createElement(v,{exact:!0,path:"/checkout",component:A}),c.a.createElement(v,{exact:!0,path:"/dashboard",component:F}),c.a.createElement(m.b,{path:"*",render:function(){return"404 page not found"}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(Q.a,null,c.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.ceab5e79.chunk.js.map